{"version":3,"sources":["dexie-observable.js"],"names":["global","factory","exports","module","require","define","amd","Dexie","Observable","this","nop","promisableChain","f1","f2","res","apply","arguments","then","thiz","args","createUUID","d","Date","now","replace","c","r","Math","random","floor","toString","hasOwnProperty","CREATE","UPDATE","DELETE","initCrudMonitor","db","table","hook","_observing","tableName","name","subscribe","primKey","obj","trans","rv","undefined","schema","uuid","keyPath","setByKeyPath","change","source","key","type","promise","_changes","add","rev","_lastWrittenRevision","max","onsuccess","resultKey","_then","put","onerror","delete","initCreatingHook","mods","oldObj","modsWithoutUndefined","anythingChanged","newObj","deepClone","propPath","mod","delByKeyPath","currentValue","getByKeyPath","JSON","stringify","initUpdatingHook","catch","e","console","log","stack","initDeletingHook","Promise","initIntercomm","SyncNode","mySyncNode","localStorage","requestsWaitingForReply","consumeIntercommMessages","node","ignoreTransaction","transaction","_intercomm","where","destinationNode","id","toArray","messages","forEach","msg","request","requestId","isFailure","reject","message","error","resolve","result","observable","sendMessage","sender","on","fire","consumeMessage","anyOf","map","DatabaseClosedError","options","wantReply","extend","tables","push","_syncNodes","equals","count","receiverAlive","above","first","masterNode","messageId","setItem","intercomm","broadcastMessage","bIncludeSelf","mySyncNodeId","nodes","all","filter","onIntercomm","dbname","overrideParseStoresSpec","origFunc","stores","dbSchema","call","Object","keys","indexOf","substr","self","DatabaseChange","defineClass","Number","String","override","Promise$1","browserIsShuttingDown","NODE_TIMEOUT","HIBERNATE_GRACE_PERIOD","LOCAL_POLL","HEARTBEAT_INTERVAL","localStorageImpl","myRevision","lastHeartBeat","deleteTimeStamp","url","isMaster","syncProtocol","syncContext","syncOptions","connected","status","appliedRemoteRevision","remoteBaseRevisions","local","remote","dbUploadState","tablesToUpload","currentTable","currentKey","localBaseRevision","wakeupObservers","lastWrittenRevision","latestRevision","initWakeupObservers","overrideCreateTransaction","mode","storenames","dbschema","parent","dynamicallyOpened","addChanges","some","storeName","slice","rootTransaction","findRootTransaction","timeoutHandle","clearTimeout","setTimeout","initOverrideCreateTransaction","crudMonitor","overrideOpen","origOpen","_allTables","mapToClass","initOverrideOpen","defineProperty","get","pollHandle","heartbeatHandle","fake","version","_uncommittedChanges","Version","prototype","_parseStoresSpec","addEventType","changes","cleanup","_createTransaction","open","close","origClose","unsubscribe","onLatestRevisionIncremented","onSuicide","onBeforeUnload","suicideNurseCall","origDelete","orderBy","last","lastChange","latestRevisionIncremented","currentMaster","poll","heartbeat","handledRevision","vip","readChanges","recursion","wasPartial","ongoingOperation","partial","ourSyncNode","limit","length","ourNodeStillExists","modify","syncNode","Error","location","reload","finally","currentInstance","isOpen","weBecameMaster","below","value","removeItem","update","deleteOldChanges","wereTheOneDying","nodeID","Events","oldestNode","primaryKeys","keysToDelete","bulkDelete","_onStorage","event","parts","split","prop","parseInt","newValue","isNaN","_onBeforeUnload","beforeunload","ex","addEventListener","addons"],"mappings":"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"}